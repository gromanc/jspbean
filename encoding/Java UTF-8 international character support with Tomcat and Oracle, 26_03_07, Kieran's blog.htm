<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
	
	
	<title>Java UTF&ndash;8 international character support with Tomcat and Oracle, 26/03/07, Kieran's blog</title>	
	<meta name="description" content="A blog about me and my work at the University of Warwick">
	
	
	<link rel="stylesheet" href="/blogbuilder/media/css/layout.css" type="text/css" media="screen">
	<link rel="stylesheet" href="/blogbuilder/media/css/mime_icons.css" type="text/css" media="screen">
	<link rel="stylesheet" href="/blogbuilder/media/styles/grungy/style.css" title="grungy" type="text/css" media="screen">
	
	
		
	
	<link rel="alternate stylesheet" href="/blogbuilder/media/styles/blank/style.css" title="Blank Style" type="text/css" media="screen">
	
	
	
	<!--[if lt IE 7]>
	<style type="text/css">
	
	/* don't show rounded corners as it can't do it properly */
	#utilityBarLeft { display: none; }
	#utilityBarRight { display: none; }
	
	</style>
	<![endif]-->
	
	<link rel="stylesheet" href="/blogbuilder/media/css/lightbox.css" type="text/css" media="screen">
	
	<style type="text/css" media="screen">
		
	</style>
	
	<link rel="stylesheet" href="/blogbuilder/media/css/print.css" type="text/css" media="print">
		
		
<script type="text/javascript" src="/blogbuilder/media/js/equaliseheight.js"></script>

<script type="text/javascript" src="/blogbuilder/media/js/prototype.js"></script>
<script type="text/javascript" src="/blogbuilder/media/js/blogbuilder.js"></script>
<script type="text/javascript" src="/blogbuilder/media/js/embed.js"></script>
<script type="text/javascript" src="/blogbuilder/media/js/scriptaculous.js"></script>
<script type="text/javascript" src="/blogbuilder/media/js/lightbox.js"></script>
<script type="text/javascript" src="/blogbuilder/media/js/audio-player.js"></script>	





<!--[if lt IE 7]>
<script type="text/javascript">

sfHover = function() {
  var sfEls = document.getElementById("nav").getElementsByTagName("LI");
  for (var i=0; i<sfEls.length; i++) {
    sfEls[i].onmouseover=function() {
      this.className+=" sfhover";
    }
    sfEls[i].onmouseout=function() {
      this.className=this.className.replace(new RegExp(" sfhover\\b"), "");
    }
  }
}
if (window.attachEvent) window.attachEvent("onload", sfHover);

</script>
<![endif]-->

	<link rel="microsummary" type="application/x.microsummary+xml" href="http://blogs.warwick.ac.uk/kieranshaw/entry/utf-8_internationalisation_with?microsummary=microsummary">

	<link rel="search" 
		  type="application/opensearchdescription+xml" 
		  title="Warwick Blogs" 
		  href="http://search.warwick.ac.uk/static/search/blogsosd.xml">

</head>


	<body id="entries-page">



<!-- Body -->
<div id="leftshading">
<div id="rightshading">
<div id="mainContent">

	<!-- Banner -->
	

<div id="banner">
	<div id="logoBanner">
		<div id="topBar"></div>
		<div id="bannerImageRight"></div>
		<div id="bannerImageLeft"></div>	
	
		<div id="siteLogoBar"><a title="A blog about me and my work at the University of Warwick" href="/kieranshaw/">Kieran's blog</a></div>
	</div>
	
	<div id="utilityBar">
		<div id="utilityBarLeft"></div>
		<div id="utilityBarRight"></div>

	<ul id="bloglinks">
		<li><a href="/showall">Warwick Blogs</a></li>
		
		<li><span class="pipe"> | </span><a href="/kieranshaw/contact/">Contact me</a></li>
	
	
	
	
	
	
	
	
	

	</ul>
	
<ul id="nav">
	
	
	
	
		<li><a href="/blogbuilder/admin/blogQuestions/view.spr?blog=094d4021fb3eb11e00fb3eb58dfc0001">
			Prompts (0 read
			
			)</a><span class="pipe"> | </span></li>
	
	
	
	
		<li><a href="https://websignon.warwick.ac.uk/origin/slogin?shire=https%3A%2F%2Fblogs.warwick.ac.uk%2Fblogbuilder%2Fshire&providerId=urn%3Ablogs.warwick.ac.uk%3Ablogbuilder%3Aservice&target=http%3A%2F%2Fblogs.warwick.ac.uk%2Fkieranshaw%2Fentry%2Futf-8_internationalisation_with">Sign in</a></li>
	
	
	</ul>
	</div>

</div>
	
	<div id="container"> 
	
	

	<!-- Main Content -->	
	
	


<div class="content" id="centreContent">

<div id="entries">





<script type="text/javascript">
var showed = {};

function showComments(entryId,blogId) {
	if (showed[entryId]) {
		Effect.toggle('comments_' + entryId,'blind',{duration:1.5});
		/* This would reload every time 
		 * Element.show('commentpopup_' + entryId);
	  	 * Element.hide('commentclose_' + entryId);
	  	 * showed[entryId] = false;
	  	 */
	  	 
	  	/* Instead, don't reload after the first time */
	  	Effect.toggle('comments_' + entryId,'blind',{duration:1.5,afterFinish:function(request){Element.hide('spinner_' + entryId);}});
	  	if (document.getElementById('commentpopup_' + entryId).style.display == 'none') {
	  		Element.show('commentpopup_' + entryId);
	  		Element.hide('commentclose_' + entryId);
	  	} else {
	  		Element.hide('commentpopup_' + entryId);
	  		Element.show('commentclose_' + entryId);	  	
	  	}
	  	
	  	return;
	} else {
		showed[entryId] = true;
	}

	Element.show('spinner_' + entryId);

	new Ajax.Updater('comments_' + entryId,'/blogbuilder/admin/comments/get.spr',
	 {asynchronous:true, 
	  evalScripts:true, 
	  onComplete:function(request)
	  {
	  	Effect.toggle('comments_' + entryId,'blind',{duration:1.5,afterFinish:function(request){Element.hide('spinner_' + entryId);}});
	  	if (document.getElementById('commentpopup_' + entryId).style.display == 'none') {
	  		Element.show('commentpopup_' + entryId);
	  		Element.hide('commentclose_' + entryId);
	  	} else {
	  		Element.hide('commentpopup_' + entryId);
	  		Element.show('commentclose_' + entryId);	  	
	  	}
	  }, 
	  method:'get',
	  parameters:'blog=' + blogId + '&entryId=' + entryId + "&ms=" + new Date().getTime()});
}


function checkComment(passedForm) {
	var form = passedForm.form;
	if (form.name.value.length <= 0) {
		alert("Please provide a name");
		return false;
	}
	if (form.questionAnswer.value.length <= 0) {
		alert("You must answer the question or your comment will be rejected");
		return false;
	}
	if (form.content.value.length <= 0) {
		alert("You must write a comment");
		return false;
	}
	if (form.content.value.length > 4000) {
		alert("Your comment is too long, must be 4000 characters at most, it is currently " + form.content.value.length + "characters");
		return false;
	}
	return true;
}




String.prototype.trim = function() {
	// Replace repeated spaces, newlines and tabs with a single space
	return this.replace(/^\s*|\s(?=\s)|\s*$/g, "");
}

	function ajaxCheckComment(passedForm,entryId,blogId) {
			if (!checkComment(passedForm)) {
				return false;
			}
			
			passedForm.form.submit.value='Please wait...';
			Element.update('commentInfo_' + entryId,'Please wait&hellip;');
		  	Element.show('commentInfo_' + entryId);
			new Effect.Highlight('commentInfo_' + entryId, {duration: 1.5,restorecolor: 'none'});
				
//			var form = Form.serialize(passedForm.form);
			var form = encodeForm(passedForm.form);
				
			var options = {
                   method : 'post',
                   postBody : form + '&ajax=true',
                   asynchronous: true,
                   onComplete : function(request) {
                       // reload the comments window
                    	       
                        var response = request.responseText.trim();
                        var success = true;
                                   
                        if (response.length > 5 && response.substring(0,5) == "Error") {
                        	success = false;
                        }
                        
                        if (success) {
	                        new Ajax.Updater('comments_' + entryId,'/blogbuilder/admin/comments/get.spr',
			 				{
			 					asynchronous:true, 
			  					evalScripts:true, 
							    onComplete:function(request)
			 				 	{
					  				//make some kind of message pop up
					  				passedForm.form.submit.value='Comment posted';
					  				Element.update('commentInfo_' + entryId,'Your comment has been posted');
					  				Element.show('commentInfo_' + entryId);
									new Effect.Highlight('commentInfo_' + entryId, {duration: 1.5,restorecolor: 'none'});
							    }, 
								method:'get',
			  					parameters:'blog=' + blogId + '&entryId=' + entryId + "&ms=" + new Date().getTime()
			  				});
	                    } else {
                        	//make some kind of message pop up
					  		passedForm.form.submit.value='Add comment';
					  		Element.update('commentInfo_' + entryId,response);
					  		Element.show('commentInfo_' + entryId);
							new Effect.Highlight('commentInfo_' + entryId, {duration: 1.5,startcolor:'#ff3333',restorecolor: 'none'});
                        }                      
              		} 
                 };
                 
   			new Ajax.Request('/blogbuilder/admin/comments/postAjax.spr?blog=' + blogId + '&entryId=' + entryId, options);
		}
		
		
function encodeForm(form) {
	var elements = Form.getElements(form);
    var queryComponents = new Array();

    for (var i = 0; i < elements.length; i++) {
    	var name = elements[i].name;
    	var value = elements[i].value;
    	var queryComponent = ''
    	if (elements[i].type == 'text' || elements[i].type == 'hidden' || elements[i].type == 'textarea') {
			queryComponent = name + "=" + postEncode(value);      
		} else {
			queryComponent = Form.Element.serialize(elements[i]);
		}
		if (queryComponent) {
        	queryComponents.push(queryComponent);
		}
    }

    var output = queryComponents.join('&');
    
    return output;
}
		
function postEncode(input) {
	var output = '';
	var size = input.length;
	for(var i=0; i<size; i++) {
	   	var c = input.charCodeAt(i).toString();
    	if (c>127) {
	    	output += '%26%23' + c + '%3B';	
    	} else {
	    	output += encodeURIComponent(input.substr(i,1));
    	}	
	}
	return output;
}



function refreshRating(blogId,entryId,fieldId) {
	new Ajax.Updater(fieldId,'/blogbuilder/admin/rating/ajaxRating.spr',
	 	{
	 		asynchronous:true, 
		  	evalScripts:true, 
	  		method:'get',
	  		parameters:'blog=' + blogId + '&entryId=' + entryId + '&ms=' + new Date().getTime()
	  	});
}

function rateEntry(blogId,entryId,callbackId) {
	var options = {
        method : 'post',
        parameters : 'blog=' + blogId + '&entryId=' + entryId,
        asynchronous: true,
        onComplete : function(request) {
        	refreshRating(blogId,entryId,callbackId);
    	}   
    };
   	new Ajax.Request('/blogbuilder/admin/rating/rateEntry.spr', options);
}

function unrateEntry(blogId,entryId,callbackId) {
	var options = {
        method : 'post',
        parameters : 'blog=' + blogId + '&entryId=' + entryId,
        asynchronous: true,
        onComplete : function(request) {
        	refreshRating(blogId,entryId,callbackId);
    	}   
    };
   	new Ajax.Request('/blogbuilder/admin/rating/unrateEntry.spr', options);
}


		
</script>





<div class="day">

<h2 class="dateheader">March 26, 2007</h2>
<div class="entry">

<div class="entryBody">

	




		

		
			
				
				






	
	<h3 class="entryHeader">
		
		
		
			
				
					Java <span class="caps">UTF</span>&ndash;8 international character support with Tomcat and Oracle
				
				
			
		
		
		
		
		
	</h3>
	
		
		

		
			
			
				
				
				
				
			
			
			
		

<h2>Introduction&nbsp;</h2>

<p>I've spent the last few days looking at getting proper international character support working in our <a href="http://files.warwick.ac.uk">Files.Warwick</a> application working.</p>

<p>At E-Lab we've never been that great at doing internationalisation support. BlogBuilder does a pretty good job of internationalisation as can be seen by quite a lot of our bloggers writing in Chinese/Korean/Japanese.</p>

<p>However, it's a bit of a cludge and doesn't work everywhere.</p>

<p>It didn't take long for someone to upload a file to Files.Warwick with an &quot;&eacute;&quot; in the file name. Due to our previous lack of thought in this area, this swiftly turned into a ? :(</p>

<p>So...how do you get your app to support international characters throughout?</p>

<h2>What is international character support?</h2>

<p>You'll hear all sorts of jargon regarding internationalisation support. Here is a little explanation of what it is all about.</p>

<p>What I do NOT mean is i18n support which is making the application support multiple languages in the interface so that you can read help pages and admin links in French or Chinese. What I mean by internationalisation support is being able to accept user input in any language or character set.</p>

<p>Tim Bray has a really good explanation of some of the <a href="http://www.tbray.org/ongoing/When/200x/2003/04/26/UTF">issues surrounding ASCII/Unicode/UTF-8</a>.</p>

<h2>UTF-8 all the way through the stack</h2>

<p>We need to look at UTF-8 support in the following areas:</p>

<ol>
  <li>URLs</li>
  <li>Apache<br />
     </li>
  <li>HTML<br />
    </li>
  <li>Javascript</li>
  <li>POST data<br />
    </li>
  <li>File download (Content-Disposition)<br />
    </li>
  <li>JSPs</li>
  <li>Java code</li>
  <li>Tomcat</li>
  <li>Oracle</li>
  <li>File system</li>
</ol>

<p>I'll go through each of these areas and explain how well they are supported by default and what changes you might need to make to support UTF-8 in each area.</p>

<h3>URLs&nbsp;</h3>

<p>URLs should only contain <a href="http://en.wikipedia.org/wiki/ASCII">ASCII characters</a>. The ASCII character set is quite restrictive if you want to use Chinese characters for instance, so there is some encoding needed here. So if you've got a file with a Chinese character and you want to link to it, you need to do this: </p>

<p>&quot;&#20013;.doc&quot; -&gt;&nbsp; &quot;%E4%B8%AD.doc&quot;</p>

<p>Thankfully this can be done with a bit of Java:</p>

<p>java.net.URLEncoder.encode(&quot;&#20013;.doc&quot;,&quot;UTF-8&quot;);</p>

<p>So, whenever you need to generate something for the address bar or a direct or something like that, you must URL encode the data. You don't have to detect this as it doesn't hurt to do this for links which are just plain old ASCII as they don't get changed, as you can see with the &quot;.doc&quot; ending on the above example.</p>

<h3>Apache</h3>

<p>Generally you don't need to worry about Apache as it shouldn't be messing with your HMTL or URLs. However, if you are doing some proxying with mod_proxy then you might need to have a think about this. We use mod_proxy to do proxying from Apache through to Tomcat. If you've got encoded characters in URL that you need to convert into some query string for your underlying app then you're going to have a strange little problem. </p>

<p>If you have a URL coming into Apache that looks like this:</p>

<p>http://mydomain/%E4%B8%AD.doc and you have a mod_rewrite/proxy rule like this:</p>

<p>RewriteRule ^/(.*) http://mydomain:8080/filedownload/?filename=$1 [QSA,L,P]</p>

<p>Unfortunately the $1 is going to get mangled during the rewrite. QSA (QueryStringAppend) actually deals with these characters just fine and will send this through untouched, but when you grab a bit of the URL such as my $1 here then the characters get mangled as Apache tries to do some unescaping of its own into ISO-8859-1, but it's UTF-8 not ISO-8859-1 so it doesn't work properly. So, to keep our special characters in UTF-8, we'll escape it back again.</p>

<p>RewriteMap escape int:escape<br />
  RewriteRule ^/(.*) http://mydomain:8080/filedownload/?filename=${escape:$1} [QSA,L,P]</p>

<p>Take a look at your rewrite logs to see if this is working.</p>

<h3>HTML&nbsp;</h3>

<p>HTML support for UTF-8 is good, you just need to make sure you set the character encoding properly on your pages. This should be as simple as bit of code in the HEAD of your page:</p>

<p>&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot;&gt;&nbsp;</p>

<p>You should be able to write out UTF-8 characters for real into the page without any special encoding.&nbsp;</p>

<h3>Javascript&nbsp;</h3>

<p>Javascript supports UTF-8 characters very well so as long as you don't use escape() then when your users enter characters, they shouldn't get mangled. We also use AJAX do do some functions in our application so you need to think about that as well but again, it should just work.</p>

<p>All of the above only holds true if you set the character encoding right on your surrounding HTML.</p>

<h3>POST data<br />
  </h3>

<p>Getting POST datafrom the user in the right format is simple too. As long as your HTML has the right encoding then you should be ok.</p>

<h3>File download (Content-Disposition)&nbsp;</h3>

<p>If you want to serve files for download from your app, as we obviously do with Files.Warwick then you'll need to understand how browsers deal with non ASCII characters in file names when downloading. Unfortunately the standard is not exactly well defined as no one really thought about UTF-8 file names until recently.</p>

<p>Internet Explorer supports URL encoded file names but Firefox supports a rather strange Base64 encoded value for high byte file names, so something like this should do the job:<br />
  </p>

<pre><code><br />
String userAgent = request.getHeader(&quot;User-Agent&quot;);<br />
String encodedFileName = null;<br />
<br />
if (userAgent.contains(&quot;MSIE&quot;) || userAgent.contains(&quot;Opera&quot;)) {<br />
	encodedFileName = URLEncoder.encode(node.getName(), &quot;UTF-8&quot;);<br />
} else {<br />
	encodedFileName = &quot;=?UTF-8?B?&quot; + new String(Base64.encodeBase64(node.getName().getBytes(&quot;UTF-8&quot;)), &quot;UTF-8&quot;) + &quot;?=&quot;;<br />
}<br />
<br />
response.setHeader(&quot;Content-Disposition&quot;, &quot;attachment; filename=\&quot;&quot; + encodedFileName + &quot;\&quot;&quot;);<br />
</code></pre>
<p></p>

<p>Obviously you can tweak the user agent detection to be a bit smarter than this.&nbsp;</p>

<h3>JSPs&nbsp;</h3>

<p>UTF-8 support in JSPs is pretty much a one liner.</p>

<p>&lt;%@ page language=&quot;java&quot; pageEncoding=&quot;utf-8&quot; contentType=&quot;text/html;charset=utf-8&quot; %&gt;</p>

<p>Include that at the top of every single JSP perhaps in a prelude.jsp file and you're away.&nbsp;</p>

<h3>Java code</h3>

<p>As long as you source strings are properly encoded then generally you can rely on Java to keep your UTF-8 encoded input. However, be careful what String functions you perform on your UTF-8 data. Be sure to do things like this:</p>

<p>myStr.getBytes(&quot;UTF-8&quot;) rather than just myStr.getBytes()</p>

<p>If you don't then you'll most likely end up with ISO-8859-1 bytes instead. If for some reason you can not get your input data to be UTF-8, and it is coming in with a different encoding, you could do something like this to convert it to UTF-8:</p>

<p>String myUTF8 = new String(my8859.getBytes(&quot;ISO-8859-1&quot;),&quot;UTF-8&quot;)</p>

<p>Debugging can be fun with high byte characters as generally logging to a console isn't going to show you the characters you are expecting. If you did this:</p>

<p>System.out.println(new String(new byte[] { -28, -72, -83},&quot;UTF-8&quot;)</p>

<p>Then you'd probably just see a ? rather than the Chinese character that it really should be. However, you can make log4j log UTF-8 messages. Just add&nbsp;</p>

<p>&lt;param name=&quot;Encoding&quot; value=&quot;UTF-8&quot;/&gt;</p>

<p>To the appender in your log4j.xml config. Or this:</p>

<p>log4j.appender.myappender.Encoding=UTF-8</p>

<p>To your log4j.properties file. You might still only see the UTF-8 data properly if you view the log file in an editor/viewer that can view UTF-8 data (Windows notepad is ok for instance).</p>

<h3>Tomcat</h3>

<p>By default Tomcat will encode everything in ISO-8859-1. You can in theory override this by setting the incoming encoding of the HttpServletRequest to be UTF-8, but once some of the request is read, then the encoding is set, so chances are you might not be able to manually do:</p>

<p>request.setCharacterEncoding(&quot;UTF-8&quot;)</p>

<p>early enough to have an effect. So instead you can tell Tomcat you want it to run in UTF-8 mode by default. Just add the following to the Connector you want UTF-8 on in your server.xml config file in Tomcat.</p>

<p>URIEncoding=&quot;UTF-8&quot;</p>

<p>Not doing this has the fun quirk that if you have a request like this:</p>

<p>/test.htm?highByte=%E4%B8%AD</p>

<p>If you did request.getQueryString() you'd get the raw String that &quot;highByte=%E4%B8%AD&quot;, but if you did request.getParameter(&quot;highByte&quot;) then you'd get the ISO-8859-1 encoded value instead which would not be right. Sigh.</p>

<h3>Oracle</h3>

<p>You could just URL encode all of your data and put it into the database in ASCII like you always used to. However, that doesn't make for very readable data. There are two options here although I've only tried the one.</p>

<ol>
  <li>Set the default character encoding of your Oracle database to be UTF-8. However, it is set on a per server basis, not a per schema basis so your whole server would be affected.</li>
  <li>Use NVARCHAR2 fields instead of VARCHAR2 fields and you can store real UTF-8 data.</li>
</ol>

<p>We went for option 2 as we have a shared Oracle server. First of all, convert all fields that you want to store UTF-8 data in from VARCHAR2s to NVARCHAR2s. Be careful as I don't think you can change back! </p>

<p>You then need to tell your JDBC code somehow that it needs to send data that the NVARCHAR2 fields can undertand. There are a couple of ways of doing this too:</p>

<ol>
  <li>Set the defaultNChar property on the connection to true.</li>
  <li>Use the <a href="http://download-uk.oracle.com/docs/cd/B19306_01/server.102/b14225/ch7progrunicode.htm#i1008882">setFormOfUse() method that is an Oracle specific extension to the PrepearedStatement</a> </li>
</ol>

<p>I went for option 1 as the problem with option 2 is that you have to somehow get at the Oracle specific connection or prepared statement within your Java code. This is not fun as you'll often be using a connection pool that will hide away these details.</p>

<h3>Files system&nbsp;</h3>

<p>File system support of UTF-8 characters is again pretty good, but you are sometimes going to have issues with viewing the file listings. I just couldn't get a UTF-8 file name to display properly over a putty SSH connection. Through a simple Java test program, I could write and read back a UTF-8 file name on our Solaris 10 box, but all I could ever actually read when doing an &quot;ls&quot; was ?????.doc. So for the sake of maintainability of the file system I went for a URL encoded version of the file. This isn't ideal, but it works.</p>

<h2>Conclusion </h2>

<p>As you can see, there is quite a lot of work involved in supporting UTF-8 throughout. A lot of my time was spent researching as my understanding of encoding issues wasn't great. Now that I've put together this guide, I hope all of our apps can start to work towards full UTF-8 support.</p>

<p>Of course the above guide is quite specific to my experience in the app I was dealing with and the environment I work in so your experiences might be more or less painful :)&nbsp;</p>




			
		
		
		<br/>

		<p class="smallcopy entryfooter">
		
		<span class="author">
		<img src="/blogbuilder/media/images/tiny_author.gif" title="External: null" alt=""/>
				</span> <span class="entryFooterSpacer">: </span>
		
		
		<span class="datetime">
		

		
			<a href="/kieranshaw/daily/260307/" title="Read all entries written on this date">26 Mar 2007</a> 17:07
		
		</span>
		
		<span class="entryrating" id="entryrating_094d7399117e53e201118e6f1b4f1285">
			
			
			

		</span>
		
		<span class="taglist">
		
			
			
				|&nbsp;<img src="/blogbuilder/media/images/admin/tag-icon.gif" alt=""/>&nbsp;Tags:&nbsp;<a href="/kieranshaw/tag/encoding/" title="" rel="tag">Encoding</a>&nbsp;<a href="/kieranshaw/tag/java/" title="" rel="tag">Java</a>&nbsp;<a href="/kieranshaw/tag/jsp/" title="" rel="tag">JSP</a>&nbsp;<a href="/kieranshaw/tag/oracle/" title="" rel="tag">Oracle</a>&nbsp;<a href="/kieranshaw/tag/programming/" title="" rel="tag">Programming</a>&nbsp;<a href="/kieranshaw/tag/tomcat/" title="" rel="tag">Tomcat</a>&nbsp;<a href="/kieranshaw/tag/unicode/" title="" rel="tag">Unicode</a>&nbsp;<a href="/kieranshaw/tag/utf-8/" title="" rel="tag">Utf-8</a>&nbsp;<a href="/kieranshaw/tag/work/" title="" rel="tag">Work</a>
			
		
		</span>
		


	



	
	
		<span class="commentpopup hasComments">
		|&nbsp;<img src="/blogbuilder/media/images/tiny_comment.gif" alt=""/> <a href="#comments" title="Read or add comments">Comments&nbsp;(15)</a>
		</span>
	
	


		

		

		

		
		<span class="reportlink">
		|&nbsp;<img src="/blogbuilder/media/images/tiny_pling.gif" alt="">&nbsp;<a href="/blogbuilder/admin/reportAbuse.spr?blog=094d4021fb3eb11e00fb3eb58dfc0001&amp;entryId=094d7399117e53e201118e6f1b4f1285" title="Tell the University if you think there may be a problem with this entry">Report&nbsp;a&nbsp;problem</a>
		</span>
		
		


		</p>

</div>
<div class="entryTail">
	<div id="comments">
	<a name="comments"></a>

	
	
	
	

	<h3 class="commentsHeader"><img src="/blogbuilder/media/images/commenticonlarge.gif" alt="-"/> 
	
	
	
		
		
		
			15 comments by 3 or more people
		
	
	
	
		<img src="/blogbuilder/media/images/padlock.gif" title="Only commentable by: Students,Alumni,Staff" alt="Not publicly viewable" />
	
	</h3>
	
	
	<span class="skipToCommentsEnd">[<a href="#comment15">Skip to the latest comment</a>]</span>
	
	
	
	








<ol class="commentsList">
	
	 
		
		
		



	
		
			<li class="commentItem authorComment" title="Comment by the author of this entry">
		
		
	
	
	
	
	
		<a name="comment1"></a>
	
	
	<span class="comment_tl"></span>
	<span class="comment_tr"></span>
	<span class="comment_bl"></span>
	<span class="comment_br"></span>
	
	
		
	
		
			<h4 class="commentauthor"><a href="http://blogs.warwick.ac.uk/kieranshaw/"></a></h4>
		
		
	
	
	
	
		<p>Update: I forgot to mention <span class="caps">UTF</span>-8 in emails. With a MimeMessage instead of just doing:</p>

<p>message.setText(utf8Body) and message.setSubject(utf8Subject);</p>

<p>Do this instead:</p>

<p>message.setText(utf8Body,&rdquo;UTF-8&rdquo;) and message.setSubject(utf8Subject,&rdquo;UTF-8&rdquo;);</p>

<p>If you are using Spring and the SimpleMailMessage, you don&rsquo;t get access to these methods. Using the JavaMailSender interface, you can do this:</p>

<p>MimeMessagePreparator prep = new MimeMessagePreparator() {<br />
   public void prepare(final MimeMessage message) throws Exception {<br />
   message.setSubject(utf8Subject, &ldquo;UTF-8&rdquo;);<br />
   message.setText(utf8Body, &ldquo;UTF-8&rdquo;);<br />
   }<br />
   };<br />
   mailSender.send(prep);</p>


	
	
		
		
	
	
	<p class="smallcopy commentfooter">
	
	
	
	27 Mar 2007,&nbsp;16:01
	 
	
		
			
		
		
	
	
	
	
	</p>
	</li>
	 
		
		
		



	
		
		
			<li class="commentItem loggedInComment" title="Comment by a logged in user">	
		
	
	
	
	
	
		<a name="comment2"></a>
	
	
	<span class="comment_tl"></span>
	<span class="comment_tr"></span>
	<span class="comment_bl"></span>
	<span class="comment_br"></span>
	
	
		
	
		
			<h4 class="commentauthor"><a href="http://blogs.warwick.ac.uk/nickhowes/">Nick Howes</a></h4>
		
		
	
	
	
	
		<blockquote> 
  <p>all I could ever actually read when doing an &ldquo;ls&rdquo; was <cite>?</cite>.doc</p>

</blockquote>
<p>I just managed to get a PuTTY session working with <span class="caps">UTF</span>-8 characters. You have to add this stuff to the bash user&rsquo;s <strong>.inputrc</strong> file (stolen from <a href="http://www.divvun.no/doc/infra/docu-setup-bash.html">this guide to utf-8 in bash</a>):</p>

<pre><code># Enable 8bit input
set meta-flag on
set input-meta on

# Turns off 8th bit stripping
set convert-meta off

# Keep the 8th bit for display
set output-meta on</code></pre>
<p>Then in PuTTY, in the Translation tab you can select <span class="caps">UTF</span>-8 from the dropdown.</p>

<p><img src="http://blogs.warwick.ac.uk/images/howesn/2007/03/28/untitled.png" alt="" border="0" /></p>


	
	
		
		
	
	
	<p class="smallcopy commentfooter">
	
	
	
	28 Mar 2007,&nbsp;10:17
	 
	
		
			
		
		
	
	
	
	
	</p>
	</li>
	 
		
		
		



	
	
		<li class="commentItem nonLoggedInComment" title="Comment by a non-logged in user">	
	
	
	
	
		<a name="comment3"></a>
	
	
	<span class="comment_tl"></span>
	<span class="comment_tr"></span>
	<span class="comment_bl"></span>
	<span class="comment_br"></span>
	
	
		
	
	
		<h4 class="commentauthor">Megha</h4>
	
	
	
	
		<p>This post was super helpful! Thanks. Just a note, the encoding for the response must be set along with that of the request to display characters from the DB on a jsp.</p>

<p>response.setCharacterEncoding(&ldquo;UTF8&rdquo;);</p>


	
		
		
	
	
	<p class="smallcopy commentfooter">
	
	
	
	04 Apr 2007,&nbsp;21:07
	 
	
		
			
		
		
	
	
	
	
	</p>
	</li>
	 
		
		
		



	
	
		<li class="commentItem nonLoggedInComment" title="Comment by a non-logged in user">	
	
	
	
	
		<a name="comment4"></a>
	
	
	<span class="comment_tl"></span>
	<span class="comment_tr"></span>
	<span class="comment_bl"></span>
	<span class="comment_br"></span>
	
	
		
	
	
		<h4 class="commentauthor">Dubs</h4>
	
	
	
	
		<p>Thanks!!!!!!!!!!</p>


	
		
		
	
	
	<p class="smallcopy commentfooter">
	
	
	
	05 Apr 2007,&nbsp;06:43
	 
	
		
			
		
		
	
	
	
	
	</p>
	</li>
	 
		
		
		



	
	
		<li class="commentItem nonLoggedInComment" title="Comment by a non-logged in user">	
	
	
	
	
		<a name="comment5"></a>
	
	
	<span class="comment_tl"></span>
	<span class="comment_tr"></span>
	<span class="comment_bl"></span>
	<span class="comment_br"></span>
	
	
		
	
	
		<h4 class="commentauthor">DIY Lover</h4>
	
	
	
	
		<p>You&rsquo;ve missed the most important part <span class="caps">IMO</span>: XML files &amp; (X)HTML file saving protocols.</p>

<p>The meta deceleration you make is good, but should be mirrored in your file encoding. If you&rsquo;re not sure how they are saved then you&rsquo;re probably not saving them in <span class="caps">UTF</span>-8! In notepad, go to save as and check the encoding options &amp; you&rsquo;ll find <span class="caps">UTF</span>-8 there.</p>

<p>On <span class="caps">XML</span> files? If it&rsquo;s not encoded in <span class="caps">UTF</span>-8 it won&rsquo;t be correctly parsed. End of story.</p>

<p>A handy one to keep track of!</p>


	
		
		
	
	
	<p class="smallcopy commentfooter">
	
	
	
	04 May 2007,&nbsp;14:46
	 
	
		
			
		
		
	
	
	
	
	</p>
	</li>
	 
		
		
		



	
	
		<li class="commentItem nonLoggedInComment" title="Comment by a non-logged in user">	
	
	
	
	
		<a name="comment6"></a>
	
	
	<span class="comment_tl"></span>
	<span class="comment_tr"></span>
	<span class="comment_bl"></span>
	<span class="comment_br"></span>
	
	
		
	
	
		<h4 class="commentauthor">Ski Snow Trains Bum</h4>
	
	
	
	
		<p>Good point &ndash; this caused me no end of problems a few months a go.</p>


	
		
		
	
	
	<p class="smallcopy commentfooter">
	
	
	
	04 May 2007,&nbsp;14:50
	 
	
		
			
		
		
	
	
	
	
	</p>
	</li>
	 
		
		
		



	
	
		<li class="commentItem nonLoggedInComment" title="Comment by a non-logged in user">	
	
	
	
	
		<a name="comment7"></a>
	
	
	<span class="comment_tl"></span>
	<span class="comment_tr"></span>
	<span class="comment_bl"></span>
	<span class="comment_br"></span>
	
	
		
	
	
		<h4 class="commentauthor">Robert</h4>
	
	
	
	
		<p>Thanks for posting this great article! Here are a couple more tips for using <span class="caps">UTF</span>-8 in Java:</p>

<p>You point out the problem with using req.setCharacterEncoding(&ldquo;UTF-8&rdquo;):http://java.sun.com/javaee/5/docs/api/javax/servlet/ServletRequest.html#setCharacterEncoding(java.lang.String) it comes too late. <a rel="nofollow" href="http://java.sun.com/products/servlet/Filters.html" title="The Essentials of Filters">Sun recommends</a> setting this with a filter. Tomcat comes with an example (filter.SetCharacterEncodingFilter.java) that works right out of the box. You just have to add it to your classpath and register it in your web.xml file.</p>

<p>Another problem is with resource bundles. Properties files are read as <span class="caps">ISO</span>-8859-1. To include Unicode characters, you must use \uXXXX escapes. (Learn to use Java&rsquo;s <a rel="nofollow" href="http://java.sun.com/j2se/1.5.0/docs/tooldocs/solaris/native2ascii.html">native2ascii</a> tool.) Java 6 has a new <a href="http://java.sun.com/javase/6/docs/api/java/util/ResourceBundle.Control.html">ResourceBundle.Control</a> class that allows you to read <span class="caps">XML</span> resource bundles in <span class="caps">UTF</span>-8. &ldquo;Core Java Technologies Tech Tips(October 18, 2005)&rdquo;;http://java.sun.com/developer/JDCTechTips/2005/tt1018.html discusses this.</p>

<p>Thanks again!</p>


	
		
		
	
	
	<p class="smallcopy commentfooter">
	
	
	
	27 May 2007,&nbsp;01:24
	 
	
		
			
		
		
	
	
	
	
	</p>
	</li>
	 
		
		
		



	
	
		<li class="commentItem nonLoggedInComment" title="Comment by a non-logged in user">	
	
	
	
	
		<a name="comment8"></a>
	
	
	<span class="comment_tl"></span>
	<span class="comment_tr"></span>
	<span class="comment_bl"></span>
	<span class="comment_br"></span>
	
	
		
	
	
		<h4 class="commentauthor">OnTheLookOut</h4>
	
	
	
	
		<p>Here is a nice article written about java&rsquo;s broken implementation of utf-8 (writing).<br />
   <a rel="nofollow" href="http://tripoverit.blogspot.com/2007/04/javas-utf-8-and-unicode-writing-is.html">http://tripoverit.blogspot.com/2007/04/javas-utf-8-and-unicode-writing-is.html</a></p>


	
		
		
	
	
	<p class="smallcopy commentfooter">
	
	
	
	15 Jun 2007,&nbsp;05:29
	 
	
		
			
		
		
	
	
	
	
	</p>
	</li>
	 
		
		
		



	
	
		<li class="commentItem nonLoggedInComment" title="Comment by a non-logged in user">	
	
	
	
	
		<a name="comment9"></a>
	
	
	<span class="comment_tl"></span>
	<span class="comment_tr"></span>
	<span class="comment_bl"></span>
	<span class="comment_br"></span>
	
	
		
	
	
		<h4 class="commentauthor">Suresh</h4>
	
	
	
	
		<p>Hi</p>

<p>I am facing a problem regarding french character.<br />
   I am using teradata as database and jdbc to insert and fertch data.<br />
   Teradata is supporting french character and before creating statement &amp; exeuting executeUpdate() method , french character is coming fine.But after executing executeUpdate() for inserting into DB , characters like ? are getting inserted into DB.</p>

<p>I have tried each and every options in JSPs and java code also. But&hellip;..</p>

<p>Please help me for getting a solution for this.</p>

<p>Thanks in advance <br />
   SD</p>


	
		
		
	
	
	<p class="smallcopy commentfooter">
	
	
	
	09 Jul 2007,&nbsp;08:11
	 
	
		
			
		
		
	
	
	
	
	</p>
	</li>
	 
		
		
		



	
	
		<li class="commentItem nonLoggedInComment" title="Comment by a non-logged in user">	
	
	
	
	
		<a name="comment10"></a>
	
	
	<span class="comment_tl"></span>
	<span class="comment_tr"></span>
	<span class="comment_bl"></span>
	<span class="comment_br"></span>
	
	
		
	
	
		<h4 class="commentauthor">Frank</h4>
	
	
	
	
		<p>Hi Kieran!<br />
   First of all thanks for your very good posting here, that really helped out and focussed on nearly everything mankind need for a <span class="caps">UTF</span>-8 conversion.</p>

<p>How about some <strong>MySQL-facts</strong> I found out? (all tested with MySQL Version 5.0)</p>

<ol>
  <li>First of all you need your databases and tables to be in <strong>utf8 character set</strong> (well of course ;)</li>
  <li>Your MySQL instance has to run with utf8 as <strong>default charachter set</strong>  </li>
</ol>

<p>To accomplish the first task you can simply <span class="caps">ALTER</span> your table with an <span class="caps">SQL</span> statement like this_<br />
   <em><span class="caps">ALTER DATABASE</span> db_name <span class="caps">CHARACTER SET</span> utf8 <span class="caps">COLLATE</span> utf8_general_ci;</em></p>

<p>For the second task start your mysql-demon from the command line with following option:<br />
   _path_to_mysql\bin\mysqld <strong>&mdash;character-set-server=utf8</strong></p>

<p>for more information on the options see<br />
   <a rel="nofollow" href="http://dev.mysql.com/doc/refman/5.0/en/server-options.html">http://dev.mysql.com/doc/refman/5.0/en/server-options.html</a></p>


	
		
		
	
	
	<p class="smallcopy commentfooter">
	
	
	
	10 Jul 2007,&nbsp;17:31
	 
	
		
			
		
		
	
	
	
	
	</p>
	</li>
	 
		
		
		



	
	
		<li class="commentItem nonLoggedInComment" title="Comment by a non-logged in user">	
	
	
	
	
		<a name="comment11"></a>
	
	
	<span class="comment_tl"></span>
	<span class="comment_tr"></span>
	<span class="comment_bl"></span>
	<span class="comment_br"></span>
	
	
		
	
	
		<h4 class="commentauthor">specialbrandk</h4>
	
	
	
	
		<p>Thank you for assembling this excellent note. It is super useful.</p>


	
		
		
	
	
	<p class="smallcopy commentfooter">
	
	
	
	08 Aug 2007,&nbsp;04:00
	 
	
		
			
		
		
	
	
	
	
	</p>
	</li>
	 
		
		
		



	
	
		<li class="commentItem nonLoggedInComment" title="Comment by a non-logged in user">	
	
	
	
	
		<a name="comment12"></a>
	
	
	<span class="comment_tl"></span>
	<span class="comment_tr"></span>
	<span class="comment_bl"></span>
	<span class="comment_br"></span>
	
	
		
	
	
		<h4 class="commentauthor">ekSi</h4>
	
	
	
	
		<p>Oh my god, I&rsquo;m so thankful to find your writings, your solution works like a charm&hellip; Thank You sooo much :)</p>


	
		
		
	
	
	<p class="smallcopy commentfooter">
	
	
	
	16 Aug 2007,&nbsp;03:48
	 
	
		
			
		
		
	
	
	
	
	</p>
	</li>
	 
		
		
		



	
	
		<li class="commentItem nonLoggedInComment" title="Comment by a non-logged in user">	
	
	
	
	
		<a name="comment13"></a>
	
	
	<span class="comment_tl"></span>
	<span class="comment_tr"></span>
	<span class="comment_bl"></span>
	<span class="comment_br"></span>
	
	
		
	
	
		<h4 class="commentauthor">Will</h4>
	
	
	
	
		<p>Hey Kieran &ndash; did you know this post comes up when doing a Google search for &lsquo;JSP internationalisation&rsquo;? Interesting stuff anyway.</p>


	
		
		
	
	
	<p class="smallcopy commentfooter">
	
	
	
	05 Oct 2007,&nbsp;10:25
	 
	
		
			
		
		
	
	
	
	
	</p>
	</li>
	 
		
		
		



	
		
		
			<li class="commentItem loggedInComment" title="Comment by a logged in user">	
		
	
	
	
	
	
		<a name="comment14"></a>
	
	
	<span class="comment_tl"></span>
	<span class="comment_tr"></span>
	<span class="comment_bl"></span>
	<span class="comment_br"></span>
	
	
		
	
		
			<h4 class="commentauthor"><a href="http://blogs.warwick.ac.uk/mmannion/">Mathew Mannion</a></h4>
		
		
	
	
	
	
		<p>You are my hero.</p>


	
	
		
		
	
	
	<p class="smallcopy commentfooter">
	
	
	
	18 May 2010,&nbsp;11:50
	 
	
		
			
		
		
	
	
	
	
	</p>
	</li>
	 
		
		
		



	
		
		
			<li class="commentItem loggedInComment" title="Comment by a logged in user">	
		
	
	
	
	
	
		<a name="comment15"></a>
	
	
	<span class="comment_tl"></span>
	<span class="comment_tr"></span>
	<span class="comment_bl"></span>
	<span class="comment_br"></span>
	
	
		
	
		
			<h4 class="commentauthor"><a href="http://blogs.warwick.ac.uk/mmannion/">Mathew Mannion</a></h4>
		
		
	
	
	
	
		<p>One thing that was glossed over is that if you use Spring, there is a filter you can put in your <span class="caps">XML</span> to ensure both the request <span class="caps">AND</span> the response have <span class="caps">UTF</span>-8 encoding by default:</p>

<p>&lt;filter&gt;<br />
   &lt;filter-name&gt;characterEncodingFilter&lt;/filter-name&gt;<br />
   &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter&lt;/filter-class&gt;<br />
   &lt;init-param&gt;<br />
   &lt;param-name&gt;encoding&lt;/param-name&gt;<br />
   &lt;param-value&gt;UTF-8&lt;/param-value&gt;<br />
   &lt;/init-param&gt;<br />
   &lt;init-param&gt;<br />
   &lt;param-name&gt;forceEncoding&lt;/param-name&gt;<br />
   &lt;param-value&gt;true&lt;/param-value&gt;<br />
   &lt;/init-param&gt;<br />
   &lt;/filter&gt;</p>

<p>Then you can just put it at the top of your filter stack.</p>


	
	
		
		
	
	
	<p class="smallcopy commentfooter">
	
	
	
	18 May 2010,&nbsp;12:32
	 
	
		
			
		
		
	
	
	
	
	</p>
	</li>
	
</ol>


<a name="commentForm_"></a>

<div id="commentInfo_" style="width:50%;margin-left:auto;margin-right:auto;margin-top:5px;margin-bottom:5px;clear:both;background:#ddd;color:#333;border:1px solid #333;font-size:1.5em;text-align:center;padding:5px;display:none;"></div>

	<div id="commentform">
	<hr id="commentRuler">
	<h4>Add a comment</h4>

	
	
		You are not allowed to comment on this entry as it has restricted commenting permissions.
		
	</div>


	</div>

	
		<div id="trackbacks">
		<a name="trackbacks"></a>
		<h3 title="Trackbacks can be turned off in the entry edit screen or globally in the blog admin appearance screen">Trackbacks</h3>

		<p class="smallcopy entryfooter">
			Trackback URL: http://blogs.warwick.ac.uk/kieranshaw/entry/utf-8_internationalisation_with/trackback/
		</p>
        
        
        
	
		</div>
	


	</div>

</div>
</div>
</div>
</div>
	
	<!-- Side Content -->
	
<div class="content" id="sideContent">

<div id="sideContentHeader"></div>
<div id="sideContentMainContainer"><div id="sideContentMain">

<div class="noindex">





	
	
		







		


<div id="calendar" class="sideContentItem">

<div class="innerSidebarContent">
	<h2><a href="/kieranshaw/monthly/0307/">March 2007</a></h2>
	<table class="calendar" summary="Calendar of entries">
		<thead>
      		<tr>
        		<th id="monday" abbr="Monday">Mo</th>
        		<th id="tuesday" abbr="Tuesday">Tu</th>
        		<th id="wednesday" abbr="Wednesday">We</th>
        		<th id="thursday" abbr="Thursday">Th</th>
        		<th id="friday" abbr="Friday">Fr</th>
        		<th id="saturday" abbr="Saturday">Sa</th>
       		 	<th id="sunday" abbr="Sunday">Su</th>
      		</tr>
    	</thead>
    	<tfoot>
		<tr>
			<td colspan="2">
				
					<a href="/kieranshaw/monthly/0207/">Feb</a>
				
			</td>
			<td colspan="3">
				| &nbsp;<a href="/kieranshaw/newentries/">Today</a>&nbsp; |
			</td>
			<td colspan="2">
				
					<a href="/kieranshaw/monthly/0407/">Apr</a>
				
			</td>
		</tr>
		</tfoot>
    	<tbody>
	
	
		
		
		
		
		
			<tr>
			
			
			
				
					
						
					
					
					
					
					
					
					
				
			
				
					<td headers="monday">&nbsp;&nbsp;</td>					
					
				
				
			
			
				
					
					
						
					
					
					
					
					
					
				
			
				
					<td headers="tuesday">&nbsp;&nbsp;</td>					
					
				
				
			
			
				
					
					
					
						
					
					
					
					
					
				
			
				
					<td headers="wednesday">&nbsp;&nbsp;</td>					
					
				
				
			
			
				
					
					
					
					
						
					
					
					
					
				
			
				
				
									
				
			
			
				
					
					
					
					
					
										
					
					
					
				
			
				
				
			
			
				
					
					
					
					
					
					
						
					
					
				
			
				
				
			
			
				
					
					
					
					
					
					
					
						
					
				
			
				
				
			
		
		
		
			
			
			
			
				
			
			
			
			
		
		
		
		
			<td headers="thursday" >1</td>
		
		
		
	
		
		
		
		
			
		
		
		
		
			
			
			
			
			
								
			
			
			
		
		
		
		
			<td headers="friday" >2</td>
		
		
		
	
		
		
		
		
			
		
		
		
		
			
			
			
			
			
			
				
			
			
		
		
		
		
			<td headers="saturday" >3</td>
		
		
		
	
		
		
		
		
			
		
		
		
		
			
			
			
			
			
			
			
				
			
		
		
		
		
			<td headers="sunday" >4</td>
		
		
		</tr>
	
		
		
		
		
			<tr>
		
		
		
		
			
				
			
			
			
			
			
			
			
		
		
		
		
			<td headers="monday" >5</td>
		
		
		
	
		
		
		
		
			
		
		
		
		
			
			
				
			
			
			
			
			
			
		
		
		
		
			<td headers="tuesday" >6</td>
		
		
		
	
		
		
		
		
			
		
		
		
		
			
			
			
				
			
			
			
			
			
		
		
		
		
			<td headers="wednesday" >7</td>
		
		
		
	
		
		
		
		
			
		
		
		
		
			
			
			
			
				
			
			
			
			
		
		
		
		
			<td headers="thursday" >8</td>
		
		
		
	
		
		
		
		
			
		
		
		
		
			
			
			
			
			
								
			
			
			
		
		
		
		
			<td headers="friday" >9</td>
		
		
		
	
		
		
		
		
			
		
		
		
		
			
			
			
			
			
			
				
			
			
		
		
		
		
			<td headers="saturday" >10</td>
		
		
		
	
		
		
		
		
			
		
		
		
		
			
			
			
			
			
			
			
				
			
		
		
		
		
			<td headers="sunday" >11</td>
		
		
		</tr>
	
		
		
		
		
			<tr>
		
		
		
		
			
				
			
			
			
			
			
			
			
		
		
		
		
			<td headers="monday" >12</td>
		
		
		
	
		
		
		
		
			
		
		
		
		
			
			
				
			
			
			
			
			
			
		
		
		
		
			<td headers="tuesday" >13</td>
		
		
		
	
		
		
		
		
			
		
		
		
		
			
			
			
				
			
			
			
			
			
		
		
		
		
			<td headers="wednesday" >14</td>
		
		
		
	
		
		
		
		
			
		
		
		
		
			
			
			
			
				
			
			
			
			
		
		
		
		
			<td headers="thursday" >15</td>
		
		
		
	
		
		
		
		
			
		
		
		
		
			
			
			
			
			
								
			
			
			
		
		
		
		
			<td headers="friday" >16</td>
		
		
		
	
		
		
		
		
			
		
		
		
		
			
			
			
			
			
			
				
			
			
		
		
		
		
			<td headers="saturday" >17</td>
		
		
		
	
		
		
		
		
			
		
		
		
		
			
			
			
			
			
			
			
				
			
		
		
		
		
			<td headers="sunday" >18</td>
		
		
		</tr>
	
		
		
		
		
			<tr>
		
		
		
		
			
				
			
			
			
			
			
			
			
		
		
		
		
			<td headers="monday" >19</td>
		
		
		
	
		
		
		
		
			
		
		
		
		
			
			
				
			
			
			
			
			
			
		
		
		
		
			<td headers="tuesday" >20</td>
		
		
		
	
		
		
		
		
			
		
		
		
		
			
			
			
				
			
			
			
			
			
		
		
		
		
			<td headers="wednesday" >21</td>
		
		
		
	
		
		
		
		
			
		
		
		
		
			
			
			
			
				
			
			
			
			
		
		
		
		
			<td headers="thursday" >22</td>
		
		
		
	
		
		
		
		
			
		
		
		
		
			
			
			
			
			
								
			
			
			
		
		
		
		
			<td headers="friday" >23</td>
		
		
		
	
		
		
		
		
			
		
		
		
		
			
			
			
			
			
			
				
			
			
		
		
		
		
			<td headers="saturday" >24</td>
		
		
		
	
		
		
		
		
			
		
		
		
		
			
			
			
			
			
			
			
				
			
		
		
		
		
			<td headers="sunday" >25</td>
		
		
		</tr>
	
		
		
		
		
			<tr>
		
		
		
		
			
				
			
			
			
			
			
			
			
		
		
		
			
			<td headers="monday" ><a title="1 entry on 26 March 2007" 
				href="/kieranshaw/daily/260307/">26</a></td>	
			
			
		
		
		
		
	
		
		
		
		
			
		
		
		
		
			
			
				
			
			
			
			
			
			
		
		
		
		
			<td headers="tuesday" >27</td>
		
		
		
	
		
		
		
		
			
		
		
		
		
			
			
			
				
			
			
			
			
			
		
		
		
		
			<td headers="wednesday" >28</td>
		
		
		
	
		
		
		
		
			
		
		
		
		
			
			
			
			
				
			
			
			
			
		
		
		
		
			<td headers="thursday" >29</td>
		
		
		
	
		
		
		
		
			
		
		
		
		
			
			
			
			
			
								
			
			
			
		
		
		
		
			<td headers="friday" >30</td>
		
		
		
	
		
		
		
		
			
		
		
		
		
			
			
			
			
			
			
				
			
			
		
		
		
		
			<td headers="saturday" >31</td>
		
		
		
	
	
	
		
		
			
				
				
				
				
				
				
				
					
				
			
		
			<td headers="sunday">&nbsp;&nbsp;</td>
		
		</tr>
	
	</tbody>
	</table>
</div>
</div>
	



	
	
		






<div class="nofollow">




<div id="taglist" class="sideContentItem">

	<h2>Tags</h2>

<div class="innerSidebarContent">
<ul>

<li>
<a title="


Blogging about blogging. Specifically the BlogBuilder system that I&#039;ve built for Warwick

" href="/kieranshaw/tag/blogging/">Blogging</a> (140)</li>

<li>
<a title="

Java (42 entries)


" href="/kieranshaw/tag/java/">Java</a> (42)</li>

<li>
<a title="

New House (39 entries)


" href="/kieranshaw/tag/new_house/">New House</a> (39)</li>

<li>
<a title="

Programming (29 entries)


" href="/kieranshaw/tag/programming/">Programming</a> (29)</li>

<li>
<a title="

Work (20 entries)


" href="/kieranshaw/tag/work/">Work</a> (20)</li>

</ul>
</div>

</div>

</div>
	



	
	
		






<div class="nofollow sideContentItem">
<div id="blogSearch">
	
		<h2>Search this blog</h2>
	



	

<div class="innerSidebarContent">
<form action="http://search.warwick.ac.uk/search/blogsearch.html" method="get" name="search_form"> 
<p>
<input id="searchText" name="q" size="15" autocomplete="off" title="Type a word or phrase, then click Go"> 
<input name="indexSection" type="hidden" value="blogs"/>
<input name="urlPrefix" type="hidden" value="http://blogs.warwick.ac.uk/kieranshaw/">
<input name="sortBy" type="hidden" value="date">
<input type="image" alt="Go" id="search_go" src="/blogbuilder/media/images/go.gif" />
<img alt="Spinner" id="search_spinner" src="/blogbuilder/media/images/firefox-spinner.gif" style="display:none;" />
</p>
<script type="text/javascript">
new Form.Element.Observer('searchText', 1, function(element, value) 
{new Ajax.Updater('search_results','/blogbuilder/sysadmin/livesearch/micro.html?urlPrefix=http://blogs.warwick.ac.uk/kieranshaw/&indexSection=blogs&sortBy=date',
 {asynchronous:true, 
  evalScripts:true, 
  onComplete:function(request){Element.show('search_go');Element.hide('search_spinner');fixme();}, 
  onLoading:function(request){Element.hide('search_go');Element.show('search_spinner');fixme();}, 
  method:'post', 
  parameters:'q=' + value })})


</script>
<style type="text/css">
 div#search_results ul li {background-image:none; padding-left:0}
 div#search_results ul {padding-left:0}
#rhsContent .content ul {padding-left:0}

</style>
<div id="search_results" ></div>
</form>

</div>
</div>
</div>
	



	
	
		





<div class="nofollow">



<div id="sidefavourites" class="sideContentItem">

	<h2>Favourite blogs</h2>

<div class="innerSidebarContent">
<ul id="folderlist">
	
		
		<li class="folder"><a class="foldername" title="View the blogs and entries in this folder" href="/kieranshaw/favs/external_stuff/">External Stuff</a>

			<ul>
				
				
				
					<li class="url">
						<a href="http://www.geminicontracthire.co.uk" title="Gemini Contract Hire and Car Leasing">Gemini Contract Hire and Car Leasing</a>
					</li>
				
					<li class="url">
						<a href="http://www.lifehacker.com/" title="LifeHacker">LifeHacker</a>
					</li>
				
					<li class="url">
						<a href="http://www.sunbirds.co.za" title="Sunbirds Bed and Breakfast">Sunbirds Bed and Breakfast</a>
					</li>
				
					<li class="url">
						<a href="http://www.wired.com" title="Wired">Wired</a>
					</li>
				
			</ul>
		</li>
		
	
		
		<li class="folder"><a class="foldername" title="View the blogs and entries in this folder" href="/kieranshaw/favs/my_favourites/">IT People</a>

			<ul>
				
				
					<li class="blog">
						<a href="/kieranshaw/favs/my_favourites/?item=094d739900d0fb710100d104944a000e" title="View entries from: Autology: John Dale's blog">Autology: John Dale's blog</a>&nbsp;<a href="/johndale/"><img src="/blogbuilder/media/images/admin/subscriptions/goto.gif" title="Go to 'Autology: John Dale's blog'" alt="Go to 'Autology: John Dale's blog'"/></a>
					</li>
				
					<li class="blog">
						<a href="/kieranshaw/favs/my_favourites/?item=094d739903c702010103cafad559053d" title="View entries from: Colin's blog">Colin's blog</a>&nbsp;<a href="/colinyates/"><img src="/blogbuilder/media/images/admin/subscriptions/goto.gif" title="Go to 'Colin's blog'" alt="Go to 'Colin's blog'"/></a>
					</li>
				
					<li class="blog">
						<a href="/kieranshaw/favs/my_favourites/?item=094d739904e0f1f70104e0ff9dd8000c" title="View entries from: Cubicle 23">Cubicle 23</a>&nbsp;<a href="/jwharley/"><img src="/blogbuilder/media/images/admin/subscriptions/goto.gif" title="Go to 'Cubicle 23'" alt="Go to 'Cubicle 23'"/></a>
					</li>
				
					<li class="blog">
						<a href="/kieranshaw/favs/my_favourites/?item=094d739900d0fb710100d104d174000f" title="View entries from: Hannah's handbag ">Hannah's handbag </a>&nbsp;<a href="/hmjamieson/"><img src="/blogbuilder/media/images/admin/subscriptions/goto.gif" title="Go to 'Hannah's handbag '" alt="Go to 'Hannah's handbag '"/></a>
					</li>
				
					<li class="blog">
						<a href="/kieranshaw/favs/my_favourites/?item=094d7399077ab97b01077b1d837900c5" title="View entries from: Innovating Research!">Innovating Research!</a>&nbsp;<a href="/lriu/"><img src="/blogbuilder/media/images/admin/subscriptions/goto.gif" title="Go to 'Innovating Research!'" alt="Go to 'Innovating Research!'"/></a>
					</li>
				
					<li class="blog">
						<a href="/kieranshaw/favs/my_favourites/?item=094d739900d0fb710100d104376c000b" title="View entries from: Kieran's blog">Kieran's blog</a>&nbsp;<a href="/kieranshaw/"><img src="/blogbuilder/media/images/admin/subscriptions/goto.gif" title="Go to 'Kieran's blog'" alt="Go to 'Kieran's blog'"/></a>
					</li>
				
					<li class="blog">
						<a href="/kieranshaw/favs/my_favourites/?item=094d739900d329b40100d84f35ec0a18" title="View entries from: Secret Plans and Clever Tricks">Secret Plans and Clever Tricks</a>&nbsp;<a href="/chrismay/"><img src="/blogbuilder/media/images/admin/subscriptions/goto.gif" title="Go to 'Secret Plans and Clever Tricks'" alt="Go to 'Secret Plans and Clever Tricks'"/></a>
					</li>
				
					<li class="blog">
						<a href="/kieranshaw/favs/my_favourites/?item=094d739900d0fb710100d104f3010010" title="View entries from: Transversality - Robert O'Toole">Transversality - Robert O'Toole</a>&nbsp;<a href="/rbotoole/"><img src="/blogbuilder/media/images/admin/subscriptions/goto.gif" title="Go to 'Transversality - Robert O'Toole'" alt="Go to 'Transversality - Robert O'Toole'"/></a>
					</li>
				
					<li class="blog">
						<a href="/kieranshaw/favs/my_favourites/?item=094d739900d0fb710100d104652a000c" title="View entries from: Warwick Learning Technology Magazine">Warwick Learning Technology Magazine</a>&nbsp;<a href="/e-learning/"><img src="/blogbuilder/media/images/admin/subscriptions/goto.gif" title="Go to 'Warwick Learning Technology Magazine'" alt="Go to 'Warwick Learning Technology Magazine'"/></a>
					</li>
				
					<li class="blog">
						<a href="/kieranshaw/favs/my_favourites/?item=094d739900d0fb710100d1050c3f0011" title="View entries from: [Ux]">[Ux]</a>&nbsp;<a href="/stevencarpenter/"><img src="/blogbuilder/media/images/admin/subscriptions/goto.gif" title="Go to '[Ux]'" alt="Go to '[Ux]'"/></a>
					</li>
				
				
			</ul>
		</li>
		
	
		
		<li class="folder"><a class="foldername" title="View the blogs and entries in this folder" href="/kieranshaw/favs/stuff/">Other Warwick People</a>

			<ul>
				
				
					<li class="blog">
						<a href="/kieranshaw/favs/stuff/?item=094d73990721d9c3010737cb14e71e9c" title="View entries from:  Computer-aided assessment for sciences"> Computer-aided assessment for sciences</a>&nbsp;<a href="/caa4s/"><img src="/blogbuilder/media/images/admin/subscriptions/goto.gif" title="Go to ' Computer-aided assessment for sciences'" alt="Go to ' Computer-aided assessment for sciences'"/></a>
					</li>
				
					<li class="blog">
						<a href="/kieranshaw/favs/stuff/?item=094d7399059fd9ce0105a0e5e67c014e" title="View entries from: Andy's Dumb Ramblings">Andy's Dumb Ramblings</a>&nbsp;<a href="/andrewingram/"><img src="/blogbuilder/media/images/admin/subscriptions/goto.gif" title="Go to 'Andy's Dumb Ramblings'" alt="Go to 'Andy's Dumb Ramblings'"/></a>
					</li>
				
					<li class="blog">
						<a href="/kieranshaw/favs/stuff/?item=094d739906b696640106b6d93c5d008e" title="View entries from: Bartleby">Bartleby</a>&nbsp;<a href="/ajtaylor/"><img src="/blogbuilder/media/images/admin/subscriptions/goto.gif" title="Go to 'Bartleby'" alt="Go to 'Bartleby'"/></a>
					</li>
				
					<li class="blog">
						<a href="/kieranshaw/favs/stuff/?item=094d739900d329b40100d84b85570a0d" title="View entries from: COOL LINKS">COOL LINKS</a>&nbsp;<a href="/charlesbourne/"><img src="/blogbuilder/media/images/admin/subscriptions/goto.gif" title="Go to 'COOL LINKS'" alt="Go to 'COOL LINKS'"/></a>
					</li>
				
					<li class="blog">
						<a href="/kieranshaw/favs/stuff/?item=094d739906ee714c0106fe95381614f3" title="View entries from: Contemplating the Frame">Contemplating the Frame</a>&nbsp;<a href="/tomabbott/"><img src="/blogbuilder/media/images/admin/subscriptions/goto.gif" title="Go to 'Contemplating the Frame'" alt="Go to 'Contemplating the Frame'"/></a>
					</li>
				
					<li class="blog">
						<a href="/kieranshaw/favs/stuff/?item=094d739900d329b40100d8532ddc0a24" title="View entries from: Dan Lawrence's Blog">Dan Lawrence's Blog</a>&nbsp;<a href="/dglawrence/"><img src="/blogbuilder/media/images/admin/subscriptions/goto.gif" title="Go to 'Dan Lawrence's Blog'" alt="Go to 'Dan Lawrence's Blog'"/></a>
					</li>
				
					<li class="blog">
						<a href="/kieranshaw/favs/stuff/?item=094d739900fef0f301016257bcb95c37" title="View entries from: Hollyzone">Hollyzone</a>&nbsp;<a href="/hollycruise/"><img src="/blogbuilder/media/images/admin/subscriptions/goto.gif" title="Go to 'Hollyzone'" alt="Go to 'Hollyzone'"/></a>
					</li>
				
					<li class="blog">
						<a href="/kieranshaw/favs/stuff/?item=094d739903f9a70101040942daef151d" title="View entries from: Neighbourhood #1">Neighbourhood #1</a>&nbsp;<a href="/iadeghe/"><img src="/blogbuilder/media/images/admin/subscriptions/goto.gif" title="Go to 'Neighbourhood #1'" alt="Go to 'Neighbourhood #1'"/></a>
					</li>
				
					<li class="blog">
						<a href="/kieranshaw/favs/stuff/?item=094d739903e13dce0103e60c98860a1e" title="View entries from: The Militant Wing of Pacifism">The Militant Wing of Pacifism</a>&nbsp;<a href="/fangz/"><img src="/blogbuilder/media/images/admin/subscriptions/goto.gif" title="Go to 'The Militant Wing of Pacifism'" alt="Go to 'The Militant Wing of Pacifism'"/></a>
					</li>
				
					<li class="blog">
						<a href="/kieranshaw/favs/stuff/?item=094d7399076ba29601076cce6b3c026e" title="View entries from: The Pale Cast of Thought">The Pale Cast of Thought</a>&nbsp;<a href="/jjameson/"><img src="/blogbuilder/media/images/admin/subscriptions/goto.gif" title="Go to 'The Pale Cast of Thought'" alt="Go to 'The Pale Cast of Thought'"/></a>
					</li>
				
				
			</ul>
		</li>
		
	
</ul>
</div>
</div>


</div>
	



	
	
		






<div class="nofollow">




<div id="mostrecentcomments" class="sideContentItem">

	<h2>Most recent comments</h2>

<div class="innerSidebarContent">
<ul>

<li>
	One thing that was glossed over is that if you use Spring, there is&hellip; by 
	
	
	<a href="http://blogs.warwick.ac.uk/mmannion/">Mathew Mannion</a>
	
	on this <a title="Java UTF&ndash;8 international character support with Tomcat and Oracle" href="/kieranshaw/entry/utf-8_internationalisation_with/">entry</a></li>

<li>
	You are my hero.

 by 
	
	
	<a href="http://blogs.warwick.ac.uk/mmannion/">Mathew Mannion</a>
	
	on this <a title="Java UTF&ndash;8 international character support with Tomcat and Oracle" href="/kieranshaw/entry/utf-8_internationalisation_with/">entry</a></li>

<li>
	And may all your chickens come home to roost &ndash; in a nice fluf&hellip; by 
	
	
	<a href="http://blogs.warwick.ac.uk/jmoreton/">Julie Moreton</a>
	
	on this <a title="I&#039;m leaving Warwick" href="/kieranshaw/entry/im_leaving_warwick/">entry</a></li>

<li>
	Good luck &ndash; I hope that you enjoy the new job!

 by 
	
	
	<a href="http://blogs.warwick.ac.uk/hnryan/">Helen Ryan</a>
	
	on this <a title="I&#039;m leaving Warwick" href="/kieranshaw/entry/im_leaving_warwick/">entry</a></li>

<li>
	Good luck Kieran. :)

 by 
	
	
	<a href="http://blogs.warwick.ac.uk/lblackwell/"></a>
	
	on this <a title="I&#039;m leaving Warwick" href="/kieranshaw/entry/im_leaving_warwick/">entry</a></li>

</ul>
</div>
</div>


</div>
	



	
	
		







<div id="galleries" class="sideContentItem">

	<h2>Galleries</h2>

<div class="innerSidebarContent">
<ul>



<li><strong><a href="/kieranshaw/slideshow/">Slideshow of all galleries</a></strong></li>


	

	<li><a href="/kieranshaw/gallery/ant_jons_wedding/">Ant & Jon's wedding</a> (19 images)</li>


	

	<li><a href="/kieranshaw/gallery/anthony_phoebes_wedding/">Anthony & Phoebe's wedding</a> (7 images)</li>


	

	<li><a href="/kieranshaw/gallery/bathroom_renovation/">Bathroom renovation</a> (13 images)</li>


	

	<li><a href="/kieranshaw/gallery/dogs/">Dogs</a> (42 images)</li>


	

	<li><a href="/kieranshaw/gallery/ferrari_driving/">Ferrari driving</a> (6 images)</li>


	

	<li><a href="/kieranshaw/gallery/garden_make_over/">Garden make over</a> (56 images)</li>


	

	<li><a href="/kieranshaw/gallery/goodbye_home/">Goodbye home</a> (8 images)</li>


	

	<li><a href="/kieranshaw/gallery/kitchen_renovation/">Kitchen renovation</a> (71 images)</li>


	

	<li><a href="/kieranshaw/gallery/lanzarote_2004/">Lanzarote 2004</a> (3 images)</li>


	

	<li><a href="/kieranshaw/gallery/moving_in/">Moving in</a> (18 images)</li>


	

	<li><a href="/kieranshaw/gallery/norfolk_2006/">Norfolk 2006</a> (27 images)</li>


	

	<li><a href="/kieranshaw/gallery/our_new_house/">Our new house</a> (12 images)</li>


	

	<li><a href="/kieranshaw/gallery/random/">Random</a> (20 images)</li>


	

	<li><a href="/kieranshaw/gallery/south_africa_2005/">South Africa 2005</a> (37 images)</li>


	

	<li><a href="/kieranshaw/gallery/south_africa_2006/">South Africa 2006</a> (72 images)</li>


	

	<li><a href="/kieranshaw/gallery/stats/">Stats</a> (21 images)</li>


	

	<li><a href="/kieranshaw/gallery/stephs_leaving_do/">Steph's leaving do</a> (21 images)</li>


	

	<li><a href="/kieranshaw/gallery/tenerife_2005/">Tenerife 2005</a> (16 images)</li>


	

	<li><a href="/kieranshaw/gallery/tom_and_louis/">Tom and Louis</a> (25 images)</li>


	

	<li><a href="/kieranshaw/gallery/wedding_stuff/">Wedding stuff</a> (25 images)</li>



</ul>
</div>
</div>
	



	
	



	
	



	
	



	
	
		


<div class="nofollow">
	
<div class="sideContentItem" id="sidebaritem_094d73990c689ee3010ca08dc1b9298c">
	
	<div class="innerSidebarContent">
		<p><script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-116344-4";
urchinTracker();
</script></p>
	</div>
</div>

</div>
	



<div id="signincopyrightfooter" class="sideContentItem">


	Not signed in<br />
	<a href="https://websignon.warwick.ac.uk/origin/slogin?shire=https%3A%2F%2Fblogs.warwick.ac.uk%2Fblogbuilder%2Fshire&providerId=urn%3Ablogs.warwick.ac.uk%3Ablogbuilder%3Aservice&target=http%3A%2F%2Fblogs.warwick.ac.uk%2Fkieranshaw%2Fentry%2Futf-8_internationalisation_with">Sign in</a>

<br/><br/>
Powered by <a href="/showall" title="BlogBuilder home page">BlogBuilder</a> 
<br/>
<a href="http://www2.warwick.ac.uk/services/its/servicessupport/web/blogs/terms/" title="Copyright and privacy statement">&copy; MMXIII</a> 

</div>

<!-- end of noindex div -->
</div>

</div></div>
<div id="sideContentFooter"></div>

</div>

	</div>

</div>
</div>
</div>



</body>
</html>